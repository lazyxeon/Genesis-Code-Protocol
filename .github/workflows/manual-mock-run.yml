---
name: Manual Mock Run

"on":
  workflow_dispatch:

permissions:
  actions: write
  contents: read

jobs:
  trigger-security-scan:
    runs-on: ubuntu-latest
    steps:
      - name: Dispatch security scan in mock mode
        uses: actions/github-script@60a0d83039c74a4aee543508d2ffcb1c3799cdea
        with:
          github-token: ${{ secrets.GITHUB_TOKEN }}
          script: |
            await github.rest.actions.createWorkflowDispatch({
              owner: context.repo.owner,
              repo: context.repo.repo,
              workflow_id: 'security-scan.yml',
              ref: context.ref,
              inputs: { mock: 'true' }
            });
            core.info('Security scan mock run dispatched');
